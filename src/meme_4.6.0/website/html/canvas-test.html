<!DOCTYPE html>
<html>
  <head>
    <title>Canvas Test</title>
    <script src="motif_logo.js" type="text/javascript"></script>
    <script type="text/javascript">
      function setup() {
        // uniform alphabets
        var dna_alphabet = new Alphabet("ACGT", "A 0.25 C 0.25 G 0.25 T 0.25");
        var prot_alphabet = new Alphabet("ACDEFGHIKLMNPQRSTVWY",
            "A 0.05 C 0.05 D 0.05 E 0.05 F 0.05 " +
            "G 0.05 H 0.05 I 0.05 K 0.05 L 0.05 " +
            "M 0.05 N 0.05 P 0.05 Q 0.05 R 0.05 " +
            "S 0.05 T 0.05 V 0.05 W 0.05 Y 0.05");
        
        var dna1 = 
        "letter-probability matrix: alength= 4 w= 15 nsites= 10 E= 0\n" +
        " 1.000000  0.000000  0.000000  0.000000 \n" +
        " 0.000000  1.000000  0.000000  0.000000 \n" +
        " 0.000000  0.000000  1.000000  0.000000 \n" +
        " 0.000000  0.000000  0.000000  1.000000 \n" +
        " 0.500000  0.500000  0.000000  0.000000 \n" +
        " 0.500000  0.000000  0.500000  0.000000 \n" +
        " 0.500000  0.000000  0.000000  0.500000 \n" +
        " 0.000000  0.500000  0.500000  0.000000 \n" +
        " 0.000000  0.500000  0.000000  0.500000 \n" +
        " 0.000000  0.000000  0.500000  0.500000 \n" +
        " 0.333333  0.333333  0.333334  0.000000 \n" +
        " 0.333333  0.333333  0.000000  0.333334 \n" +
        " 0.333333  0.000000  0.333333  0.333334 \n" +
        " 0.000000  0.333333  0.333333  0.333334 \n" +
        " 0.250000  0.250000  0.250000  0.250000 \n" +
        "";

        var dna2 = 
        "letter-probability matrix: alength= 4 w= 26 nsites= 10 E= 0\n" +
        " 1.000000  0.000000  0.000000  0.000000 \n" +
        " 0.970000  0.010000  0.010000  0.010000 \n" +
        " 0.940000  0.020000  0.020000  0.020000 \n" +
        " 0.910000  0.030000  0.030000  0.030000 \n" +
        " 0.880000  0.040000  0.040000  0.040000 \n" +
        " 0.850000  0.050000  0.050000  0.050000 \n" +
        " 0.820000  0.060000  0.060000  0.060000 \n" +
        " 0.790000  0.070000  0.070000  0.070000 \n" +
        " 0.760000  0.080000  0.080000  0.080000 \n" +
        " 0.730000  0.090000  0.090000  0.090000 \n" +
        " 0.700000  0.100000  0.100000  0.100000 \n" +
        " 0.670000  0.110000  0.110000  0.110000 \n" +
        " 0.640000  0.120000  0.120000  0.120000 \n" +
        " 0.610000  0.130000  0.130000  0.130000 \n" +
        " 0.580000  0.140000  0.140000  0.140000 \n" +
        " 0.550000  0.150000  0.150000  0.150000 \n" +
        " 0.520000  0.160000  0.160000  0.160000 \n" +
        " 0.490000  0.170000  0.170000  0.170000 \n" +
        " 0.460000  0.180000  0.180000  0.180000 \n" +
        " 0.430000  0.190000  0.190000  0.190000 \n" +
        " 0.400000  0.200000  0.200000  0.200000 \n" +
        " 0.370000  0.210000  0.210000  0.210000 \n" +
        " 0.340000  0.220000  0.220000  0.220000 \n" +
        " 0.310000  0.230000  0.230000  0.230000 \n" +
        " 0.280000  0.240000  0.240000  0.240000 \n" +
        " 0.250000  0.250000  0.250000  0.250000 \n" +
        "";

        var dna3 = 
        "letter-probability matrix: alength= 4 w= 26 nsites= 10 E= 0\n" +
        " 0.000000  1.000000  0.000000  0.000000 \n" +
        " 0.010000  0.970000  0.010000  0.010000 \n" +
        " 0.020000  0.940000  0.020000  0.020000 \n" +
        " 0.030000  0.910000  0.030000  0.030000 \n" +
        " 0.040000  0.880000  0.040000  0.040000 \n" +
        " 0.050000  0.850000  0.050000  0.050000 \n" +
        " 0.060000  0.820000  0.060000  0.060000 \n" +
        " 0.070000  0.790000  0.070000  0.070000 \n" +
        " 0.080000  0.760000  0.080000  0.080000 \n" +
        " 0.090000  0.730000  0.090000  0.090000 \n" +
        " 0.100000  0.700000  0.100000  0.100000 \n" +
        " 0.110000  0.670000  0.110000  0.110000 \n" +
        " 0.120000  0.640000  0.120000  0.120000 \n" +
        " 0.130000  0.610000  0.130000  0.130000 \n" +
        " 0.140000  0.580000  0.140000  0.140000 \n" +
        " 0.150000  0.550000  0.150000  0.150000 \n" +
        " 0.160000  0.520000  0.160000  0.160000 \n" +
        " 0.170000  0.490000  0.170000  0.170000 \n" +
        " 0.180000  0.460000  0.180000  0.180000 \n" +
        " 0.190000  0.430000  0.190000  0.190000 \n" +
        " 0.200000  0.400000  0.200000  0.200000 \n" +
        " 0.210000  0.370000  0.210000  0.210000 \n" +
        " 0.220000  0.340000  0.220000  0.220000 \n" +
        " 0.230000  0.310000  0.230000  0.230000 \n" +
        " 0.240000  0.280000  0.240000  0.240000 \n" +
        " 0.250000  0.250000  0.250000  0.250000 \n" +
        "";

        var dna4 = 
        "letter-probability matrix: alength= 4 w= 26 nsites= 10 E= 0\n" +
        " 0.000000  0.000000  1.000000  0.000000 \n" +
        " 0.010000  0.010000  0.970000  0.010000 \n" +
        " 0.020000  0.020000  0.940000  0.020000 \n" +
        " 0.030000  0.030000  0.910000  0.030000 \n" +
        " 0.040000  0.040000  0.880000  0.040000 \n" +
        " 0.050000  0.050000  0.850000  0.050000 \n" +
        " 0.060000  0.060000  0.820000  0.060000 \n" +
        " 0.070000  0.070000  0.790000  0.070000 \n" +
        " 0.080000  0.080000  0.760000  0.080000 \n" +
        " 0.090000  0.090000  0.730000  0.090000 \n" +
        " 0.100000  0.100000  0.700000  0.100000 \n" +
        " 0.110000  0.110000  0.670000  0.110000 \n" +
        " 0.120000  0.120000  0.640000  0.120000 \n" +
        " 0.130000  0.130000  0.610000  0.130000 \n" +
        " 0.140000  0.140000  0.580000  0.140000 \n" +
        " 0.150000  0.150000  0.550000  0.150000 \n" +
        " 0.160000  0.160000  0.520000  0.160000 \n" +
        " 0.170000  0.170000  0.490000  0.170000 \n" +
        " 0.180000  0.180000  0.460000  0.180000 \n" +
        " 0.190000  0.190000  0.430000  0.190000 \n" +
        " 0.200000  0.200000  0.400000  0.200000 \n" +
        " 0.210000  0.210000  0.370000  0.210000 \n" +
        " 0.220000  0.220000  0.340000  0.220000 \n" +
        " 0.230000  0.230000  0.310000  0.230000 \n" +
        " 0.240000  0.240000  0.280000  0.240000 \n" +
        " 0.250000  0.250000  0.250000  0.250000 \n" +
        "";
        var dna5 = 
        "letter-probability matrix: alength= 4 w= 26 nsites= 10 E= 0\n" +
        " 0.000000  0.000000  0.000000  1.000000 \n" +
        " 0.010000  0.010000  0.010000  0.970000 \n" +
        " 0.020000  0.020000  0.020000  0.940000 \n" +
        " 0.030000  0.030000  0.030000  0.910000 \n" +
        " 0.040000  0.040000  0.040000  0.880000 \n" +
        " 0.050000  0.050000  0.050000  0.850000 \n" +
        " 0.060000  0.060000  0.060000  0.820000 \n" +
        " 0.070000  0.070000  0.070000  0.790000 \n" +
        " 0.080000  0.080000  0.080000  0.760000 \n" +
        " 0.090000  0.090000  0.090000  0.730000 \n" +
        " 0.100000  0.100000  0.100000  0.700000 \n" +
        " 0.110000  0.110000  0.110000  0.670000 \n" +
        " 0.120000  0.120000  0.120000  0.640000 \n" +
        " 0.130000  0.130000  0.130000  0.610000 \n" +
        " 0.140000  0.140000  0.140000  0.580000 \n" +
        " 0.150000  0.150000  0.150000  0.550000 \n" +
        " 0.160000  0.160000  0.160000  0.520000 \n" +
        " 0.170000  0.170000  0.170000  0.490000 \n" +
        " 0.180000  0.180000  0.180000  0.460000 \n" +
        " 0.190000  0.190000  0.190000  0.430000 \n" +
        " 0.200000  0.200000  0.200000  0.400000 \n" +
        " 0.210000  0.210000  0.210000  0.370000 \n" +
        " 0.220000  0.220000  0.220000  0.340000 \n" +
        " 0.230000  0.230000  0.230000  0.310000 \n" +
        " 0.240000  0.240000  0.240000  0.280000 \n" +
        " 0.250000  0.250000  0.250000  0.250000 \n" +
        "";
        var prot1 = 
        "letter-probability matrix: alength= 20 w= 23 nsites= 10 E= 0\n" +
        " 1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 \n" +
        " 0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 \n" +
        " 0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 \n" +
        " 0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 \n" +
        " 0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 \n" +
        " 0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0 \n" +
        " 0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0 \n" +
        " 0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0 \n" +
        " 0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0 \n" +
        " 0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0 \n" +
        " 0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0 \n" +
        " 0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0 \n" +
        " 0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0 \n" +
        " 0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0 \n" +
        " 0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0 \n" +
        " 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0 \n" +
        " 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0 \n" +
        " 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0 \n" +
        " 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0 \n" +
        " 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1 \n" +
        " 0.0  0.0  0.5  0.0  0.0  0.0  0.0  0.0  0.0  0.0 0.0  0.5  0.0  0.0  0.0 0.0  0.0  0.0  0.0  0.0 \n" +
        " 0.0  0.0  0.0  0.5  0.0  0.0  0.0  0.0  0.0  0.0 0.0  0.0  0.0  0.5  0.0 0.0  0.0  0.0  0.0  0.0 \n" +
        " 0.05  0.05  0.05  0.05  0.05  0.05  0.05  0.05  0.05  0.05 0.05  0.05  0.05  0.05  0.05 0.05  0.05  0.05  0.05  0.05 \n" +
        "";

        var pspm1 = new Pspm(dna1, "DNA 1");
        var canvas1 = document.getElementById("test1");
        draw_logo_on_canvas(logo_1(dna_alphabet, "Test of canvas", pspm1), canvas1, false, 1.0);

        var pspm2 = new Pspm(prot1, "AA 1");
        var canvas2 = document.getElementById("test2");
        draw_logo_on_canvas(logo_1(prot_alphabet, "Test of canvas", pspm2), canvas2, false, 1.0);

        var pspm3 = new Pspm(dna2, "DNA 2");
        var canvas3 = document.getElementById("test3");
        draw_logo_on_canvas(logo_1(dna_alphabet, "Test of canvas", pspm3), canvas3, false, 1.0);

        var pspm4 = new Pspm(dna3, "DNA 3");
        var canvas4 = document.getElementById("test4");
        draw_logo_on_canvas(logo_1(dna_alphabet, "Test of canvas", pspm4), canvas4, false, 1.0);

        var pspm5 = new Pspm(dna4, "DNA 4");
        var canvas5 = document.getElementById("test5");
        draw_logo_on_canvas(logo_1(dna_alphabet, "Test of canvas", pspm5), canvas5, false, 1.0);

        var pspm6 = new Pspm(dna5, "DNA 5");
        var canvas6 = document.getElementById("test6");
        draw_logo_on_canvas(logo_1(dna_alphabet, "Test of canvas", pspm6), canvas6, false, 1.0);
      }
    </script>
  </head>
  <body onload="setup()">
    <h2>Canvas Logo Test</h2>
    <p>The purpose of this page is to provide a test for the canvas based logo functionality of meme. 
    As this function has caused us a lot of problems getting it right on different browsers this is intended to be a page
    that users can take screenshots of to demonstrate problems.</p>
    <table border="1">
      <tr>
        <th>Test</th><th>Canvas Logo</th>
      </tr>
      <tr>
        <td>IUPAC DNA codes; uniform&nbsp;background; no&nbsp;pseudocount; (ACGTMRWSYKVHDBN)</td><td><canvas id="test1"></canvas></td>
      </tr>
      <tr>
        <td>IUPAC AA codes; uniform&nbsp;background; no&nbsp;pseudocount;<br/> (ACDEFGHIKL<br />&nbsp;MNPQRSTVWY<br />&nbsp;BZX)</td>
        <td><canvas id="test2"></canvas></td>
      </tr>
      <tr>
        <td>DNA 'A' variable height; uniform&nbsp;background;</td><td><canvas id="test3"></canvas></td>
      </tr>
      <tr>
        <td>DNA 'C' variable height; uniform&nbsp;background;</td><td><canvas id="test4"></canvas></td>
      </tr>
      <tr>
        <td>DNA 'G' variable height; uniform&nbsp;background;</td><td><canvas id="test5"></canvas></td>
      </tr>
      <tr>
        <td>DNA 'T' variable height; uniform&nbsp;background;</td><td><canvas id="test6"></canvas></td>
      </tr>
    </table>
  </body>
</html>
